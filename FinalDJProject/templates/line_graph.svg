<svg width="800" height="600" viewBox="0 0 800 400">
  <style>
    .axis { stroke: #333; stroke-width: 2; }
    .tick { stroke: #888; stroke-width: 1; }
    .label { font-size: 12px; fill: #000000; }
    .manhattan { stroke: #e41a1c; fill: none; stroke-width: 1; }
    .brooklyn { stroke: #377eb8; fill: none; stroke-width: 1; }
    .queens { stroke: #4daf4a; fill: none; stroke-width: 1; }
    .bronx { stroke: #984ea3; fill: none; stroke-width: 1; }
    .statenisland { stroke: #ff7f00; fill: none; stroke-width: 1; }
  </style>

  {% set W, H = 800, 400 %}
  {% set N = graph_dates|length %}
  {% set max_y = [graph_manhattan, graph_brooklyn, graph_queens, graph_bronx, graph_statenisland]|map('max')|max %}
  <line x1="0" y1="0" x2="0" y2="{{H}}" class="axis"/>
  <line x1="0" y1="{{H}}" x2="{{W}}" y2="{{H}}" class="axis"/>

  <polyline class="manhattan"
    points="{% for i in range(N) %}{{ i * (W/(N-1)) }},{{ H - (graph_manhattan[i] / max_y * H) }} {% endfor %}"/>
  <polyline class="brooklyn"
    points="{% for i in range(N) %}{{ i * (W/(N-1)) }},{{ H - (graph_brooklyn[i] / max_y * H) }} {% endfor %}"/>
  <polyline class="queens"
    points="{% for i in range(N) %}{{ i * (W/(N-1)) }},{{ H - (graph_queens[i] / max_y * H) }} {% endfor %}"/>
  <polyline class="bronx"
    points="{% for i in range(N) %}{{ i * (W/(N-1)) }},{{ H - (graph_bronx[i] / max_y * H) }} {% endfor %}"/>
  <polyline class="statenisland"
    points="{% for i in range(N) %}{{ i * (W/(N-1)) }},{{ H - (graph_statenisland[i] / max_y * H) }} {% endfor %}"/>

  {% for y in range(0, max_y+1, max(1, max_y//5)) %}
    <text x="5" y="{{ H - (y / max_y * H) - 5 }}" class="label">{{ y }}</text>
    <line x1="0" y1="{{ H - (y / max_y * H) }}" x2="{{W}}" y2="{{ H - (y / max_y * H) }}" class="tick" />
  {% endfor %}


<text x="10" y="425" class="label" alignment-baseline="middle">2020</text>
    <text x="160" y="425" class="label" alignment-baseline="middle">2021</text>
    <text x="320" y="425" class="label" alignment-baseline="middle">2022</text>
    <text x="480" y="425" class="label" alignment-baseline="middle">2023</text>
    <text x="640" y="425" class="label" alignment-baseline="middle">2024</text>
    <text x="750" y="425" class="label" alignment-baseline="middle">2025</text>

  <rect x="600" y="40" width="180" height="120" fill="#fff" stroke="#ccc"/>
  <rect x="610" y="52" width="14" height="14" fill="#e41a1c"/>
  <text x="630" y="64" class="label" alignment-baseline="middle">Manhattan</text>
  <rect x="610" y="72" width="14" height="14" fill="#377eb8"/>
  <text x="630" y="84" class="label" alignment-baseline="middle">Brooklyn</text>
  <rect x="610" y="92" width="14" height="14" fill="#4daf4a"/>
  <text x="630" y="104" class="label" alignment-baseline="middle">Queens</text>
  <rect x="610" y="112" width="14" height="14" fill="#984ea3"/>
  <text x="630" y="124" class="label" alignment-baseline="middle">Bronx</text>
  <rect x="610" y="132" width="14" height="14" fill="#ff7f00"/>
  <text x="630" y="144" class="label" alignment-baseline="middle">Staten Island</text>
</svg>